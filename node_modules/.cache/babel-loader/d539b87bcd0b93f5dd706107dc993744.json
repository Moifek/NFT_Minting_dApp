{"ast":null,"code":"\"use strict\";\n\nvar __createBinding = this && this.__createBinding || (Object.create ? function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  Object.defineProperty(o, k2, {\n    enumerable: true,\n    get: function () {\n      return m[k];\n    }\n  });\n} : function (o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nvar __setModuleDefault = this && this.__setModuleDefault || (Object.create ? function (o, v) {\n  Object.defineProperty(o, \"default\", {\n    enumerable: true,\n    value: v\n  });\n} : function (o, v) {\n  o[\"default\"] = v;\n});\n\nvar __importStar = this && this.__importStar || function (mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\n\n  __setModuleDefault(result, mod);\n\n  return result;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.Mnemonic = void 0;\n\nconst errors = __importStar(require(\"../errors\"));\n\nconst bip39_1 = require(\"bip39\");\n\nconst userKeys_1 = require(\"./userKeys\");\n\nconst ed25519_hd_key_1 = require(\"ed25519-hd-key\");\n\nconst MNEMONIC_STRENGTH = 256;\nconst BIP44_DERIVATION_PREFIX = \"m/44'/508'/0'/0'\";\n\nclass Mnemonic {\n  constructor(text) {\n    this.text = text;\n  }\n\n  static generate() {\n    let text = bip39_1.generateMnemonic(MNEMONIC_STRENGTH);\n    return new Mnemonic(text);\n  }\n\n  static fromString(text) {\n    text = text.trim();\n    Mnemonic.assertTextIsValid(text);\n    return new Mnemonic(text);\n  }\n\n  static assertTextIsValid(text) {\n    let isValid = bip39_1.validateMnemonic(text);\n\n    if (!isValid) {\n      throw new errors.ErrWrongMnemonic();\n    }\n  }\n\n  deriveKey() {\n    let addressIndex = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let password = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : \"\";\n    let seed = bip39_1.mnemonicToSeedSync(this.text, password);\n    let derivationPath = `${BIP44_DERIVATION_PREFIX}/${addressIndex}'`;\n    let derivationResult = ed25519_hd_key_1.derivePath(derivationPath, seed.toString(\"hex\"));\n    let key = derivationResult.key;\n    return new userKeys_1.UserSecretKey(key);\n  }\n\n  getWords() {\n    return this.text.split(\" \");\n  }\n\n  toString() {\n    return this.text;\n  }\n\n}\n\nexports.Mnemonic = Mnemonic;","map":{"version":3,"sources":["../../src/walletcore/mnemonic.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA,MAAA,MAAA,GAAA,YAAA,CAAA,OAAA,CAAA,WAAA,CAAA,CAAA;;AACA,MAAA,OAAA,GAAA,OAAA,CAAA,OAAA,CAAA;;AACA,MAAA,UAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,MAAA,gBAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;;AAEA,MAAM,iBAAiB,GAAG,GAA1B;AACA,MAAM,uBAAuB,GAAG,kBAAhC;;AAEA,MAAa,QAAb,CAAqB;EAGjB,WAAA,CAAoB,IAApB,EAAgC;IAC5B,KAAK,IAAL,GAAY,IAAZ;EACH;;EAEc,OAAR,QAAQ,GAAA;IACX,IAAI,IAAI,GAAG,OAAA,CAAA,gBAAA,CAAiB,iBAAjB,CAAX;IACA,OAAO,IAAI,QAAJ,CAAa,IAAb,CAAP;EACH;;EAEgB,OAAV,UAAU,CAAC,IAAD,EAAa;IAC1B,IAAI,GAAG,IAAI,CAAC,IAAL,EAAP;IAEA,QAAQ,CAAC,iBAAT,CAA2B,IAA3B;IACA,OAAO,IAAI,QAAJ,CAAa,IAAb,CAAP;EACH;;EAE+B,OAAjB,iBAAiB,CAAC,IAAD,EAAa;IACzC,IAAI,OAAO,GAAG,OAAA,CAAA,gBAAA,CAAiB,IAAjB,CAAd;;IAEA,IAAI,CAAC,OAAL,EAAc;MACV,MAAM,IAAI,MAAM,CAAC,gBAAX,EAAN;IACH;EACJ;;EAED,SAAS,GAAgD;IAAA,IAA/C,YAA+C,uEAAxB,CAAwB;IAAA,IAArB,QAAqB,uEAAF,EAAE;IACrD,IAAI,IAAI,GAAG,OAAA,CAAA,kBAAA,CAAmB,KAAK,IAAxB,EAA8B,QAA9B,CAAX;IACA,IAAI,cAAc,GAAG,GAAG,uBAAuB,IAAI,YAAY,GAA/D;IACA,IAAI,gBAAgB,GAAG,gBAAA,CAAA,UAAA,CAAW,cAAX,EAA2B,IAAI,CAAC,QAAL,CAAc,KAAd,CAA3B,CAAvB;IACA,IAAI,GAAG,GAAG,gBAAgB,CAAC,GAA3B;IACA,OAAO,IAAI,UAAA,CAAA,aAAJ,CAAkB,GAAlB,CAAP;EACH;;EAED,QAAQ,GAAA;IACJ,OAAO,KAAK,IAAL,CAAU,KAAV,CAAgB,GAAhB,CAAP;EACH;;EAED,QAAQ,GAAA;IACJ,OAAO,KAAK,IAAZ;EACH;;AAzCgB;;AAArB,OAAA,CAAA,QAAA,GAAA,QAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __setModuleDefault = (this && this.__setModuleDefault) || (Object.create ? (function(o, v) {\r\n    Object.defineProperty(o, \"default\", { enumerable: true, value: v });\r\n}) : function(o, v) {\r\n    o[\"default\"] = v;\r\n});\r\nvar __importStar = (this && this.__importStar) || function (mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (k !== \"default\" && Object.prototype.hasOwnProperty.call(mod, k)) __createBinding(result, mod, k);\r\n    __setModuleDefault(result, mod);\r\n    return result;\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Mnemonic = void 0;\r\nconst errors = __importStar(require(\"../errors\"));\r\nconst bip39_1 = require(\"bip39\");\r\nconst userKeys_1 = require(\"./userKeys\");\r\nconst ed25519_hd_key_1 = require(\"ed25519-hd-key\");\r\nconst MNEMONIC_STRENGTH = 256;\r\nconst BIP44_DERIVATION_PREFIX = \"m/44'/508'/0'/0'\";\r\nclass Mnemonic {\r\n    constructor(text) {\r\n        this.text = text;\r\n    }\r\n    static generate() {\r\n        let text = bip39_1.generateMnemonic(MNEMONIC_STRENGTH);\r\n        return new Mnemonic(text);\r\n    }\r\n    static fromString(text) {\r\n        text = text.trim();\r\n        Mnemonic.assertTextIsValid(text);\r\n        return new Mnemonic(text);\r\n    }\r\n    static assertTextIsValid(text) {\r\n        let isValid = bip39_1.validateMnemonic(text);\r\n        if (!isValid) {\r\n            throw new errors.ErrWrongMnemonic();\r\n        }\r\n    }\r\n    deriveKey(addressIndex = 0, password = \"\") {\r\n        let seed = bip39_1.mnemonicToSeedSync(this.text, password);\r\n        let derivationPath = `${BIP44_DERIVATION_PREFIX}/${addressIndex}'`;\r\n        let derivationResult = ed25519_hd_key_1.derivePath(derivationPath, seed.toString(\"hex\"));\r\n        let key = derivationResult.key;\r\n        return new userKeys_1.UserSecretKey(key);\r\n    }\r\n    getWords() {\r\n        return this.text.split(\" \");\r\n    }\r\n    toString() {\r\n        return this.text;\r\n    }\r\n}\r\nexports.Mnemonic = Mnemonic;\r\n//# sourceMappingURL=mnemonic.js.map"]},"metadata":{},"sourceType":"script"}