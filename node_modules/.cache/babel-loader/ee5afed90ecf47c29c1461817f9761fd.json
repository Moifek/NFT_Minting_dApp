{"ast":null,"code":"\"use strict\";\n\nvar __awaiter = this && this.__awaiter || function (thisArg, _arguments, P, generator) {\n  function adopt(value) {\n    return value instanceof P ? value : new P(function (resolve) {\n      resolve(value);\n    });\n  }\n\n  return new (P || (P = Promise))(function (resolve, reject) {\n    function fulfilled(value) {\n      try {\n        step(generator.next(value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function rejected(value) {\n      try {\n        step(generator[\"throw\"](value));\n      } catch (e) {\n        reject(e);\n      }\n    }\n\n    function step(result) {\n      result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected);\n    }\n\n    step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.setupUnitTestWatcherTimeouts = exports.isOnBrowserTests = exports.extendAbiRegistry = exports.loadAbiRegistry = exports.loadContractCode = void 0;\n\nconst code_1 = require(\"../smartcontracts/code\");\n\nconst typesystem_1 = require(\"../smartcontracts/typesystem\");\n\nconst transactionWatcher_1 = require(\"../transactionWatcher\");\n\nfunction loadContractCode(path) {\n  return __awaiter(this, void 0, void 0, function* () {\n    if (isOnBrowserTests()) {\n      return code_1.Code.fromUrl(path.toString());\n    }\n\n    return code_1.Code.fromFile(path);\n  });\n}\n\nexports.loadContractCode = loadContractCode;\n\nfunction loadAbiRegistry(paths) {\n  return __awaiter(this, void 0, void 0, function* () {\n    let sources = paths.map(e => e.toString());\n\n    if (isOnBrowserTests()) {\n      return typesystem_1.AbiRegistry.load({\n        urls: sources\n      });\n    }\n\n    return typesystem_1.AbiRegistry.load({\n      files: sources\n    });\n  });\n}\n\nexports.loadAbiRegistry = loadAbiRegistry;\n\nfunction extendAbiRegistry(registry, path) {\n  return __awaiter(this, void 0, void 0, function* () {\n    let source = path.toString();\n\n    if (isOnBrowserTests()) {\n      return registry.extendFromUrl(source);\n    }\n\n    return registry.extendFromFile(source);\n  });\n}\n\nexports.extendAbiRegistry = extendAbiRegistry;\n\nfunction isOnBrowserTests() {\n  const BROWSER_TESTS_URL = \"browser-tests\";\n  let noWindow = typeof window === \"undefined\";\n\n  if (noWindow) {\n    return false;\n  }\n\n  let isOnTests = window.location.href.includes(BROWSER_TESTS_URL);\n  return isOnTests;\n}\n\nexports.isOnBrowserTests = isOnBrowserTests;\n\nfunction setupUnitTestWatcherTimeouts() {\n  transactionWatcher_1.TransactionWatcher.DefaultPollingInterval = 42;\n  transactionWatcher_1.TransactionWatcher.DefaultTimeout = 42 * 42;\n}\n\nexports.setupUnitTestWatcherTimeouts = setupUnitTestWatcherTimeouts;","map":{"version":3,"sources":["../../src/testutils/utils.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AACA,MAAA,MAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;;AACA,MAAA,YAAA,GAAA,OAAA,CAAA,8BAAA,CAAA;;AACA,MAAA,oBAAA,GAAA,OAAA,CAAA,uBAAA,CAAA;;AAEA,SAAsB,gBAAtB,CAAuC,IAAvC,EAAqD;;IACjD,IAAI,gBAAgB,EAApB,EAAwB;MACpB,OAAO,MAAA,CAAA,IAAA,CAAK,OAAL,CAAa,IAAI,CAAC,QAAL,EAAb,CAAP;IACH;;IAED,OAAO,MAAA,CAAA,IAAA,CAAK,QAAL,CAAc,IAAd,CAAP;EACH,C;AAAA;;AAND,OAAA,CAAA,gBAAA,GAAA,gBAAA;;AAQA,SAAsB,eAAtB,CAAsC,KAAtC,EAAuD;;IACnD,IAAI,OAAO,GAAG,KAAK,CAAC,GAAN,CAAU,CAAC,IAAI,CAAC,CAAC,QAAF,EAAf,CAAd;;IAEA,IAAI,gBAAgB,EAApB,EAAwB;MACpB,OAAO,YAAA,CAAA,WAAA,CAAY,IAAZ,CAAiB;QAAE,IAAI,EAAE;MAAR,CAAjB,CAAP;IACH;;IAED,OAAO,YAAA,CAAA,WAAA,CAAY,IAAZ,CAAiB;MAAE,KAAK,EAAE;IAAT,CAAjB,CAAP;EACH,C;AAAA;;AARD,OAAA,CAAA,eAAA,GAAA,eAAA;;AAUA,SAAsB,iBAAtB,CAAwC,QAAxC,EAA+D,IAA/D,EAA6E;;IACzE,IAAI,MAAM,GAAG,IAAI,CAAC,QAAL,EAAb;;IAEA,IAAI,gBAAgB,EAApB,EAAwB;MACpB,OAAO,QAAQ,CAAC,aAAT,CAAuB,MAAvB,CAAP;IACH;;IAED,OAAO,QAAQ,CAAC,cAAT,CAAwB,MAAxB,CAAP;EACH,C;AAAA;;AARD,OAAA,CAAA,iBAAA,GAAA,iBAAA;;AAUA,SAAgB,gBAAhB,GAAgC;EAC5B,MAAM,iBAAiB,GAAG,eAA1B;EAEA,IAAI,QAAQ,GAAG,OAAO,MAAP,KAAkB,WAAjC;;EACA,IAAI,QAAJ,EAAc;IACV,OAAO,KAAP;EACH;;EAED,IAAI,SAAS,GAAG,MAAM,CAAC,QAAP,CAAgB,IAAhB,CAAqB,QAArB,CAA8B,iBAA9B,CAAhB;EACA,OAAO,SAAP;AACH;;AAVD,OAAA,CAAA,gBAAA,GAAA,gBAAA;;AAYA,SAAgB,4BAAhB,GAA4C;EACxC,oBAAA,CAAA,kBAAA,CAAmB,sBAAnB,GAA4C,EAA5C;EACA,oBAAA,CAAA,kBAAA,CAAmB,cAAnB,GAAoC,KAAK,EAAzC;AACH;;AAHD,OAAA,CAAA,4BAAA,GAAA,4BAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.setupUnitTestWatcherTimeouts = exports.isOnBrowserTests = exports.extendAbiRegistry = exports.loadAbiRegistry = exports.loadContractCode = void 0;\r\nconst code_1 = require(\"../smartcontracts/code\");\r\nconst typesystem_1 = require(\"../smartcontracts/typesystem\");\r\nconst transactionWatcher_1 = require(\"../transactionWatcher\");\r\nfunction loadContractCode(path) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        if (isOnBrowserTests()) {\r\n            return code_1.Code.fromUrl(path.toString());\r\n        }\r\n        return code_1.Code.fromFile(path);\r\n    });\r\n}\r\nexports.loadContractCode = loadContractCode;\r\nfunction loadAbiRegistry(paths) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let sources = paths.map(e => e.toString());\r\n        if (isOnBrowserTests()) {\r\n            return typesystem_1.AbiRegistry.load({ urls: sources });\r\n        }\r\n        return typesystem_1.AbiRegistry.load({ files: sources });\r\n    });\r\n}\r\nexports.loadAbiRegistry = loadAbiRegistry;\r\nfunction extendAbiRegistry(registry, path) {\r\n    return __awaiter(this, void 0, void 0, function* () {\r\n        let source = path.toString();\r\n        if (isOnBrowserTests()) {\r\n            return registry.extendFromUrl(source);\r\n        }\r\n        return registry.extendFromFile(source);\r\n    });\r\n}\r\nexports.extendAbiRegistry = extendAbiRegistry;\r\nfunction isOnBrowserTests() {\r\n    const BROWSER_TESTS_URL = \"browser-tests\";\r\n    let noWindow = typeof window === \"undefined\";\r\n    if (noWindow) {\r\n        return false;\r\n    }\r\n    let isOnTests = window.location.href.includes(BROWSER_TESTS_URL);\r\n    return isOnTests;\r\n}\r\nexports.isOnBrowserTests = isOnBrowserTests;\r\nfunction setupUnitTestWatcherTimeouts() {\r\n    transactionWatcher_1.TransactionWatcher.DefaultPollingInterval = 42;\r\n    transactionWatcher_1.TransactionWatcher.DefaultTimeout = 42 * 42;\r\n}\r\nexports.setupUnitTestWatcherTimeouts = setupUnitTestWatcherTimeouts;\r\n//# sourceMappingURL=utils.js.map"]},"metadata":{},"sourceType":"script"}