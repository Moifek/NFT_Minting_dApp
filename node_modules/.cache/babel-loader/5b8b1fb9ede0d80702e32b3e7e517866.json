{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EndpointParameterDefinition = exports.EndpointModifiers = exports.EndpointDefinition = void 0;\n\nconst typeExpressionParser_1 = require(\"./typeExpressionParser\");\n\nconst NamePlaceholder = \"?\";\nconst DescriptionPlaceholder = \"N / A\";\n\nclass EndpointDefinition {\n  constructor(name, input, output, modifiers) {\n    this.input = [];\n    this.output = [];\n    this.name = name;\n    this.input = input || [];\n    this.output = output || [];\n    this.modifiers = modifiers;\n  }\n\n  isConstructor() {\n    return this.name == \"constructor\";\n  }\n\n  static fromJSON(json) {\n    json.name = json.name == null ? NamePlaceholder : json.name;\n    json.payableInTokens = json.payableInTokens || [];\n    json.inputs = json.inputs || [];\n    json.outputs = json.outputs || [];\n    let input = json.inputs.map(param => EndpointParameterDefinition.fromJSON(param));\n    let output = json.outputs.map(param => EndpointParameterDefinition.fromJSON(param));\n    let modifiers = new EndpointModifiers(json.storageModifier, json.payableInTokens);\n    return new EndpointDefinition(json.name, input, output, modifiers);\n  }\n\n}\n\nexports.EndpointDefinition = EndpointDefinition;\n\nclass EndpointModifiers {\n  constructor(storageModifier, payableInTokens) {\n    this.storageModifier = storageModifier || \"\";\n    this.payableInTokens = payableInTokens || [];\n  }\n\n  isPayableInEGLD() {\n    return this.isPayableInToken(\"EGLD\");\n  }\n\n  isPayableInToken(token) {\n    if (this.payableInTokens.includes(token)) {\n      return true;\n    }\n\n    if (this.payableInTokens.includes(`!${token}`)) {\n      return false;\n    }\n\n    if (this.payableInTokens.includes(\"*\")) {\n      return true;\n    }\n\n    return false;\n  }\n\n  isPayable() {\n    return this.payableInTokens.length != 0;\n  }\n\n  isReadonly() {\n    return this.storageModifier == \"readonly\";\n  }\n\n}\n\nexports.EndpointModifiers = EndpointModifiers;\n\nclass EndpointParameterDefinition {\n  constructor(name, description, type) {\n    this.name = name;\n    this.description = description;\n    this.type = type;\n  }\n\n  static fromJSON(json) {\n    let parsedType = new typeExpressionParser_1.TypeExpressionParser().parse(json.type);\n    return new EndpointParameterDefinition(json.name || NamePlaceholder, json.description || DescriptionPlaceholder, parsedType);\n  }\n\n}\n\nexports.EndpointParameterDefinition = EndpointParameterDefinition;","map":{"version":3,"sources":["../../../src/smartcontracts/typesystem/endpoint.ts"],"names":[],"mappings":";;;;;;;AAAA,MAAA,sBAAA,GAAA,OAAA,CAAA,wBAAA,CAAA;;AAGA,MAAM,eAAe,GAAG,GAAxB;AACA,MAAM,sBAAsB,GAAG,OAA/B;;AAEA,MAAa,kBAAb,CAA+B;EAM3B,WAAA,CAAY,IAAZ,EAA0B,KAA1B,EAAgE,MAAhE,EAAuG,SAAvG,EAAmI;IAJ1H,KAAA,KAAA,GAAuC,EAAvC;IACA,KAAA,MAAA,GAAwC,EAAxC;IAIL,KAAK,IAAL,GAAY,IAAZ;IACA,KAAK,KAAL,GAAa,KAAK,IAAI,EAAtB;IACA,KAAK,MAAL,GAAc,MAAM,IAAI,EAAxB;IACA,KAAK,SAAL,GAAiB,SAAjB;EACH;;EAED,aAAa,GAAA;IACT,OAAO,KAAK,IAAL,IAAa,aAApB;EACH;;EAEc,OAAR,QAAQ,CAAC,IAAD,EAMd;IACG,IAAI,CAAC,IAAL,GAAY,IAAI,CAAC,IAAL,IAAa,IAAb,GAAoB,eAApB,GAAsC,IAAI,CAAC,IAAvD;IACA,IAAI,CAAC,eAAL,GAAuB,IAAI,CAAC,eAAL,IAAwB,EAA/C;IACA,IAAI,CAAC,MAAL,GAAc,IAAI,CAAC,MAAL,IAAe,EAA7B;IACA,IAAI,CAAC,OAAL,GAAe,IAAI,CAAC,OAAL,IAAgB,EAA/B;IAEA,IAAI,KAAK,GAAG,IAAI,CAAC,MAAL,CAAY,GAAZ,CAAgB,KAAK,IAAI,2BAA2B,CAAC,QAA5B,CAAqC,KAArC,CAAzB,CAAZ;IACA,IAAI,MAAM,GAAG,IAAI,CAAC,OAAL,CAAa,GAAb,CAAiB,KAAK,IAAI,2BAA2B,CAAC,QAA5B,CAAqC,KAArC,CAA1B,CAAb;IACA,IAAI,SAAS,GAAG,IAAI,iBAAJ,CAAsB,IAAI,CAAC,eAA3B,EAA4C,IAAI,CAAC,eAAjD,CAAhB;IAEA,OAAO,IAAI,kBAAJ,CAAuB,IAAI,CAAC,IAA5B,EAAkC,KAAlC,EAAyC,MAAzC,EAAiD,SAAjD,CAAP;EACH;;AAlC0B;;AAA/B,OAAA,CAAA,kBAAA,GAAA,kBAAA;;AAqCA,MAAa,iBAAb,CAA8B;EAI1B,WAAA,CAAY,eAAZ,EAAqC,eAArC,EAA8D;IAC1D,KAAK,eAAL,GAAuB,eAAe,IAAI,EAA1C;IACA,KAAK,eAAL,GAAuB,eAAe,IAAI,EAA1C;EACH;;EAED,eAAe,GAAA;IACX,OAAO,KAAK,gBAAL,CAAsB,MAAtB,CAAP;EACH;;EAED,gBAAgB,CAAC,KAAD,EAAc;IAC1B,IAAI,KAAK,eAAL,CAAqB,QAArB,CAA8B,KAA9B,CAAJ,EAA0C;MACtC,OAAO,IAAP;IACH;;IAED,IAAI,KAAK,eAAL,CAAqB,QAArB,CAA8B,IAAI,KAAK,EAAvC,CAAJ,EAAgD;MAC5C,OAAO,KAAP;IACH;;IAED,IAAI,KAAK,eAAL,CAAqB,QAArB,CAA8B,GAA9B,CAAJ,EAAwC;MACpC,OAAO,IAAP;IACH;;IAED,OAAO,KAAP;EACH;;EAED,SAAS,GAAA;IACL,OAAO,KAAK,eAAL,CAAqB,MAArB,IAA+B,CAAtC;EACH;;EAED,UAAU,GAAA;IACN,OAAO,KAAK,eAAL,IAAwB,UAA/B;EACH;;AAnCyB;;AAA9B,OAAA,CAAA,iBAAA,GAAA,iBAAA;;AAsCA,MAAa,2BAAb,CAAwC;EAKpC,WAAA,CAAY,IAAZ,EAA0B,WAA1B,EAA+C,IAA/C,EAAyD;IACrD,KAAK,IAAL,GAAY,IAAZ;IACA,KAAK,WAAL,GAAmB,WAAnB;IACA,KAAK,IAAL,GAAY,IAAZ;EACH;;EAEc,OAAR,QAAQ,CAAC,IAAD,EAA4D;IACvE,IAAI,UAAU,GAAG,IAAI,sBAAA,CAAA,oBAAJ,GAA2B,KAA3B,CAAiC,IAAI,CAAC,IAAtC,CAAjB;IACA,OAAO,IAAI,2BAAJ,CAAgC,IAAI,CAAC,IAAL,IAAa,eAA7C,EAA8D,IAAI,CAAC,WAAL,IAAoB,sBAAlF,EAA0G,UAA1G,CAAP;EACH;;AAdmC;;AAAxC,OAAA,CAAA,2BAAA,GAAA,2BAAA","sourceRoot":"","sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.EndpointParameterDefinition = exports.EndpointModifiers = exports.EndpointDefinition = void 0;\r\nconst typeExpressionParser_1 = require(\"./typeExpressionParser\");\r\nconst NamePlaceholder = \"?\";\r\nconst DescriptionPlaceholder = \"N / A\";\r\nclass EndpointDefinition {\r\n    constructor(name, input, output, modifiers) {\r\n        this.input = [];\r\n        this.output = [];\r\n        this.name = name;\r\n        this.input = input || [];\r\n        this.output = output || [];\r\n        this.modifiers = modifiers;\r\n    }\r\n    isConstructor() {\r\n        return this.name == \"constructor\";\r\n    }\r\n    static fromJSON(json) {\r\n        json.name = json.name == null ? NamePlaceholder : json.name;\r\n        json.payableInTokens = json.payableInTokens || [];\r\n        json.inputs = json.inputs || [];\r\n        json.outputs = json.outputs || [];\r\n        let input = json.inputs.map(param => EndpointParameterDefinition.fromJSON(param));\r\n        let output = json.outputs.map(param => EndpointParameterDefinition.fromJSON(param));\r\n        let modifiers = new EndpointModifiers(json.storageModifier, json.payableInTokens);\r\n        return new EndpointDefinition(json.name, input, output, modifiers);\r\n    }\r\n}\r\nexports.EndpointDefinition = EndpointDefinition;\r\nclass EndpointModifiers {\r\n    constructor(storageModifier, payableInTokens) {\r\n        this.storageModifier = storageModifier || \"\";\r\n        this.payableInTokens = payableInTokens || [];\r\n    }\r\n    isPayableInEGLD() {\r\n        return this.isPayableInToken(\"EGLD\");\r\n    }\r\n    isPayableInToken(token) {\r\n        if (this.payableInTokens.includes(token)) {\r\n            return true;\r\n        }\r\n        if (this.payableInTokens.includes(`!${token}`)) {\r\n            return false;\r\n        }\r\n        if (this.payableInTokens.includes(\"*\")) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    isPayable() {\r\n        return this.payableInTokens.length != 0;\r\n    }\r\n    isReadonly() {\r\n        return this.storageModifier == \"readonly\";\r\n    }\r\n}\r\nexports.EndpointModifiers = EndpointModifiers;\r\nclass EndpointParameterDefinition {\r\n    constructor(name, description, type) {\r\n        this.name = name;\r\n        this.description = description;\r\n        this.type = type;\r\n    }\r\n    static fromJSON(json) {\r\n        let parsedType = new typeExpressionParser_1.TypeExpressionParser().parse(json.type);\r\n        return new EndpointParameterDefinition(json.name || NamePlaceholder, json.description || DescriptionPlaceholder, parsedType);\r\n    }\r\n}\r\nexports.EndpointParameterDefinition = EndpointParameterDefinition;\r\n//# sourceMappingURL=endpoint.js.map"]},"metadata":{},"sourceType":"script"}